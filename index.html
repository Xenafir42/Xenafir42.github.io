<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zenehallgat√°si trendek 2018‚Äì2025</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
      margin: 0;
      padding: 0;
    }

    header {
      text-align: center;
      padding: 2rem;
      background: rgba(0, 0, 0, 0.4);
    }

    h1 {
      margin-bottom: 0.5rem;
      font-size: 2.5rem;
    }

    p.subtitle {
      font-size: 1.1rem;
      color: #cce5ff;
    }

    main {
      max-width: 1000px;
      margin: 2rem auto;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 2rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
    }

    section {
      margin-bottom: 3rem;
    }

    h2 {
      border-left: 5px solid #00bcd4;
      padding-left: 10px;
      font-size: 1.6rem;
      margin-bottom: 1rem;
    }

    canvas {
      width: 100% !important;
      max-width: 900px;
      height: 400px !important;
      margin: 0 auto;
      display: block;
    }

    .chart-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      padding: 1.5rem;
      margin: 0 auto;
      width: 80%;
      transition: transform 0.3s ease;
    }

    .chart-card:hover {
      transform: scale(1.02);
    }

    .explanation {
      font-size: 0.95rem;
      color: #e0f7fa;
      margin-top: 1rem;
      line-height: 1.5;
      background: rgba(255,255,255,0.08);
      padding: 1rem;
      border-radius: 10px;
    }

    footer {
      text-align: center;
      padding: 1rem;
      font-size: 0.9rem;
      color: #ccc;
      background: rgba(0, 0, 0, 0.3);
    }
  </style>
</head>
<body>
  <header>
    <h1>Zenehallgat√°si trendek 2018‚Äì2025</h1>
    <p class="subtitle">Glob√°lis adatok a hallgat√°si szok√°sokr√≥l, m≈±fajokr√≥l √©s platformokr√≥l</p>
  </header>

  <main>
    <section>
      <h2>üéß √Åtlagos hallgat√°si id≈ë (√≥ra / h√©t)</h2>
      <p>Az elm√∫lt √©vekben folyamatosan n≈ëtt az emberek √°ltal zen√©re ford√≠tott id≈ë. A streaming szolg√°ltat√°sok
      t√©rnyer√©se √©s a mobilplatformok el√©rhet≈ës√©ge meghat√°roz√≥ t√©nyez≈ëk voltak a n√∂veked√©sben.</p>
      <canvas id="hoursChart"></canvas>
      <div class="explanation">
        <strong>Mit mutat ez a diagram?</strong><br>
        A vonaldiagram az emberek heti zenehallgat√°sra sz√°nt idej√©t szeml√©lteti 2018 √©s 2025 k√∂z√∂tt.  
        L√°that√≥, hogy a pand√©mia idej√©n (2020‚Äì2021) az √©rt√©k k√ºl√∂n√∂sen megugrott, majd stabiliz√°l√≥dott.  
        Ez a n√∂veked√©s a streaming-szolg√°ltat√°sok √°ltal√°nos elterjed√©s√©vel √©s az okostelefonok szerep√©nek er≈ës√∂d√©s√©vel magyar√°zhat√≥.
      </div>
    </section>

    <section>
      <h2>üéµ M≈±fajok ar√°nya a streamingben</h2>
      <p>A pop √©s a hip-hop tov√°bbra is uralja a zenei piacot, mik√∂zben a latin √©s az afrobeats m≈±fajok 
      dinamikusan n√∂vekedtek az ut√≥bbi √©vekben, √∫j k√∂z√∂ns√©geket sz√≥l√≠tva meg vil√°gszerte.</p>
      <canvas id="genreChart"></canvas>
      <div class="explanation">
        <strong>Mit l√°thatunk itt?</strong><br>
        A halmozott oszlopdiagram azt mutatja, hogyan v√°ltozott a k√ºl√∂nb√∂z≈ë m≈±fajok n√©pszer≈±s√©ge az √©vek sor√°n.  
        A pop √©s a hip-hop egy√ºtt a teljes piac t√∂bb mint fel√©t adja, de a latin √©s afrobeats m≈±fajok ar√°nya is gyorsan n√∂vekszik.  
        A rock √©s elektronikus zene viszont fokozatosan visszaszorul a streaming korszak√°ban.
      </div>
    </section>

    <section>
      <h2>üì± Zenehallgat√°si platformok r√©szesed√©se (2025)</h2>
      <p>A Spotify tov√°bbra is piacvezet≈ë a streaming szolg√°ltat√°sok k√∂z√∂tt, mik√∂zben az Apple Music √©s 
      a YouTube Music stabilan tartja poz√≠ci√≥j√°t. Az √°zsiai piacokon a Tencent Music egyre jelent≈ësebb szerepl≈ë.</p>
      <div class="chart-card">
        <canvas id="platformChart"></canvas>
      </div>
      <div class="explanation">
        <strong>Hogyan √©rtelmezz√ºk?</strong><br>
        A k√∂rdiagram a 2025-√∂s √©v zenehallgat√°si platformjainak piaci megoszl√°s√°t mutatja.  
        A <span style="color:#1DB954;font-weight:bold;">Spotify</span> messze a legnagyobb szerepl≈ë, t√∂bb mint 30%-os r√©szesed√©ssel.  
        A <span style="color:#FA243C;font-weight:bold;">Apple Music</span> √©s a <span style="color:#FFCC00;font-weight:bold;">YouTube Music</span> stabil m√°sodik √©s harmadik helyet foglalnak el.  
        Az alternat√≠v platformok, p√©ld√°ul a <span style="color:#AA66CC;font-weight:bold;">Tencent Music</span> √©s a <span style="color:#FF8800;font-weight:bold;">Deezer</span>, region√°lis szinten m√©g mindig fontosak, 
        de glob√°lisan kisebb r√©szesed√©ssel rendelkeznek.
      </div>
    </section>

    <section>
      <h2>‚≠ê Top 10 Legn√©pszer≈±bb El≈ëad√≥k</h2>
      <p>A Last.fm k√∂z√∂ss√©gi adatai alapj√°n ezek a m≈±v√©szek domin√°lj√°k a zenei sz√≠nteret vil√°gszerte. 
      Taylor Swift vezeti a list√°t, de a hip-hop el≈ëad√≥k is er≈ës jelenl√©tet mutatnak.</p>
      <div class="chart-card">
        <canvas id="topArtistsChart"></canvas>
      </div>
      <div class="explanation">
        <strong>Mit mutat ez a diagram?</strong><br>
        A v√≠zszintes oszlopdiagram a glob√°lisan legt√∂bbet hallgatott el≈ëad√≥kat jelen√≠ti meg 2025-√∂s adatok szerint.  
        <span style="color:#FF69B4;font-weight:bold;">Taylor Swift</span> messze vezet 3,5 milli√°rd hallgat√°ssal, 
        m√≠g a <span style="color:#9C27B0;font-weight:bold;">Kanye West</span> √©s 
        <span style="color:#E91E63;font-weight:bold;">Radiohead</span> is kiemelked≈ë n√©pszer≈±s√©ggel rendelkeznek.  
        A lista t√ºkr√∂zi a pop √©s hip-hop m≈±fajok dominanci√°j√°t a modern zenei kult√∫r√°ban.
      </div>
    </section>

    <section>
      <h2>üéØ M≈±fajok Eloszl√°sa K√∂z√∂ss√©gi Tagek Alapj√°n</h2>
      <p>A Last.fm felhaszn√°l√≥i akt√≠van c√≠mk√©zik a zen√©ket, ami val√≥s k√©pet ad a m≈±fajok relat√≠v 
      n√©pszer≈±s√©g√©r≈ël a k√∂z√∂ss√©gben. A rock tov√°bbra is a legakt√≠vabban c√≠mk√©zett kateg√≥ria.</p>
      <div class="chart-card">
        <canvas id="genreRadarChart"></canvas>
      </div>
      <div class="explanation">
        <strong>Hogyan √©rtelmezz√ºk?</strong><br>
        A radar diagram a k√ºl√∂nb√∂z≈ë zenei m≈±fajok k√∂z√∂ss√©gi aktivit√°s√°t mutatja c√≠mk√©z√©sek (taggings) alapj√°n.  
        A <span style="color:#FF6384;font-weight:bold;">rock</span> √©s 
        <span style="color:#36A2EB;font-weight:bold;">electronic</span> m≈±fajok vezetik a list√°t, 
        ami r√°mutat arra, hogy ezek a st√≠lusok kifejezetten akt√≠v √©s elk√∂telezett rajong√≥t√°borral rendelkeznek.  
        A diagram nem felt√©tlen√ºl a hallgat√°si sz√°mokat, hanem ink√°bb a k√∂z√∂ss√©gi elk√∂telezetts√©get t√ºkr√∂zi.
      </div>
    </section>

    <section>
      <h2>üî• iTunes Top Dalok (Scraping)</h2>
      <p>Az iTunes Charts val√≥s idej≈± adatai alapj√°n ezek a dalok domin√°lj√°k most a piacot. 
      Az adatok k√∂zvetlen√ºl az iTunes RSS feed-b≈ël ker√ºlnek scrape-el√©sre, √≠gy mindig friss tartalmakat l√°tsz.</p>
      <div class="chart-card">
        <canvas id="itunesChart"></canvas>
      </div>
      <div class="explanation">
        <strong>Mit mutat ez a diagram?</strong><br>
        A polar area diagram az iTunes platform aktu√°lis top 10 dal√°t jelen√≠ti meg val√≥s id≈ëben.  
        Az egyes szegmensek m√©rete a dal chart poz√≠ci√≥j√°t t√ºkr√∂zi - min√©l nagyobb a ter√ºlet, ann√°l magasabb helyen √°ll a list√°n.  
        Ez a vizualiz√°ci√≥ lehet≈ëv√© teszi, hogy gyorsan √°ttekints√ºk, mely dalok domin√°lj√°k most a mainstream piacot, 
        √©s azonnal l√°ssuk az aktu√°lis zenei trendeket. Az adatok folyamatosan friss√ºlnek, √≠gy mindig az iTunes legfrissebb sl√°gerlist√°j√°t l√°thatod.
      </div>
    </section>
  </main>

  <footer>
    K√©sz√ºlt adatvizualiz√°ci√≥s projektk√©nt ‚Äî 2025
  </footer>

  <script>
    // JSON adatok
    const data = {
      "years": [2018, 2019, 2020, 2021, 2022, 2023, 2024, 2025],
      "listeningHoursPerWeek": {
        "globalAverage": [17.8, 18.6, 19.2, 20.0, 20.1, 20.3, 20.5, 20.7]
      },
      "genreShare": {
        "Pop":       [35, 34, 33, 33, 32, 31, 31, 30],
        "HipHop":    [18, 19, 20, 21, 21, 22, 22, 22],
        "Rock":      [16, 15, 15, 14, 14, 13, 12, 12],
        "Latin":     [8, 9, 10, 11, 12, 13, 14, 15],
        "Afrobeats": [2, 3, 4, 5, 7, 8, 10, 11],
        "Electronic":[10, 10, 9, 8, 7, 7, 6, 6],
        "Other":     [11, 10, 9, 8, 7, 6, 5, 4]
      },
      "platformShare2025": {
        "Spotify": 31.5,
        "Apple Music": 16.2,
        "YouTube Music": 14.8,
        "Amazon Music": 12.1,
        "Tencent Music": 8.9,
        "Deezer": 3.7,
        "Others": 12.8
      }
    };

    // Last.fm API kulcs
    const LASTFM_API_KEY = '9a5fcd11a0872341e02d43643a64f7ff';
    const LASTFM_BASE_URL = 'https://ws.audioscrobbler.com/2.0/';

    // Ensure Chart.js uses the device pixel ratio for crisp rendering on HiDPI displays
    Chart.defaults.devicePixelRatio = Math.max(1, window.devicePixelRatio || 1);
    // Default animation timing
    Chart.defaults.animation = Chart.defaults.animation || {};
    Chart.defaults.animation.duration = 600;

    // 1Ô∏è‚É£ Hallgat√°si id≈ë diagram
    new Chart(document.getElementById("hoursChart"), {
      type: "line",
      data: {
        labels: data.years,
        datasets: [{
          label: "√Åtlagos hallgat√°si id≈ë (√≥ra/h√©t)",
          data: data.listeningHoursPerWeek.globalAverage,
          borderColor: "#00bcd4",
          backgroundColor: "rgba(0, 188, 212, 0.22)",
          tension: 0.3,
          fill: true,
          pointRadius: 5,
          pointHoverRadius: 12,
          pointHoverBorderWidth: 3,
          pointBackgroundColor: "#ffffff",
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        animation: { duration: 600, easing: 'easeOutQuart' },
        plugins: {
          legend: { labels: { color: "white" } },
          tooltip: {
            backgroundColor: "rgba(0,0,0,0.8)",
            titleColor: "white",
            bodyColor: "white",
            padding: 10,
            callbacks: {
              label: function(context) {
                return `√Åtlag: ${context.formattedValue} √≥ra / h√©t`;
              }
            }
          }
        },
        interaction: { mode: 'nearest', intersect: false },
        onHover: (evt, active) => { evt.native.target.style.cursor = active.length ? 'pointer' : 'default'; },
        scales: {
          x: { ticks: { color: "white" } },
          y: { ticks: { color: "white" } }
        }
      }
    });

    // 2Ô∏è‚É£ M≈±fajok ar√°nya diagram
    (function() {
      const genres = Object.keys(data.genreShare);
      const datasets = genres.map((genre, i) => {
        const hue = Math.round((i * 55) % 360);
        const base = `hsl(${hue}, 70%, 55%)`;
        const hover = `hsl(${hue}, 78%, 45%)`;
        return {
          label: genre,
          data: data.genreShare[genre],
          backgroundColor: base,
          hoverBackgroundColor: hover,
          hoverBorderColor: '#ffffff',
          hoverBorderWidth: 2
        };
      });

      new Chart(document.getElementById("genreChart"), {
        type: "bar",
        data: { labels: data.years, datasets: datasets },
        options: {
          responsive: true,
          animation: { duration: 500, easing: 'easeOutQuart' },
          plugins: {
            legend: { labels: { color: "white" } },
            tooltip: {
              backgroundColor: "rgba(0,0,0,0.8)",
              titleColor: "white",
              bodyColor: "white",
              padding: 10,
              callbacks: {
                label: function(context) { return `${context.dataset.label}: ${context.formattedValue}%`; }
              }
            }
          },
          interaction: { mode: 'nearest', intersect: true },
          onHover: (evt, active) => { evt.native.target.style.cursor = active.length ? 'pointer' : 'default'; },
          scales: {
            x: { stacked: true, ticks: { color: "white" } },
            y: { stacked: true, ticks: { color: "white" } }
          }
        }
      });
    })();

    // 3Ô∏è‚É£ Platformok diagram
    new Chart(document.getElementById("platformChart"), {
      type: "doughnut",
      data: {
        labels: Object.keys(data.platformShare2025),
        datasets: [{
          data: Object.values(data.platformShare2025),
          backgroundColor: [
            "#1DB954", "#FA243C", "#FFCC00", "#00A8E8",
            "#AA66CC", "#FF8800", "#999999"
          ],
          borderWidth: 3,
          borderColor: "rgba(255,255,255,0.1)",
          hoverOffset: 25
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: { duration: 700, easing: 'easeOutQuart' },
        cutout: "60%",
        plugins: {
          legend: {
            position: "bottom",
            labels: { color: "white", font: { size: 14 } }
          },
          tooltip: {
            backgroundColor: "rgba(0,0,0,0.85)",
            titleColor: "#fff",
            bodyColor: "#fff",
            padding: 10,
            callbacks: {
              label: function(context) {
                return ` ${context.label}: ${context.raw}%`;
              }
            }
          }
        }
      }
    });

    // 4Ô∏è‚É£ Top El≈ëad√≥k diagram - Dinamikus API bet√∂lt√©s
    async function loadTopArtists() {
      try {
        const response = await fetch(`${LASTFM_BASE_URL}?method=chart.gettopartists&api_key=${LASTFM_API_KEY}&format=json&limit=10`);
        const result = await response.json();
        
        const artists = result.artists.artist;
        const labels = artists.map(a => a.name);
        const playcounts = artists.map(a => Math.round(a.playcount / 1000000)); // milli√≥

        new Chart(document.getElementById("topArtistsChart"), {
          type: "bar",
          data: {
            labels: labels,
            datasets: [{
              label: "Hallgat√°si sz√°m (milli√≥)",
              data: playcounts,
              backgroundColor: [
                "#FF69B4", "#9C27B0", "#E91E63", "#673AB7",
                "#3F51B5", "#F06292", "#BA68C8", "#EC407A",
                "#AB47BC", "#FF4081"
              ],
              borderColor: "rgba(255,255,255,0.2)",
              borderWidth: 2,
              hoverBackgroundColor: "rgba(255,255,255,0.8)",
              hoverBorderColor: "#ffffff",
              hoverBorderWidth: 3
            }]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            animation: { duration: 800, easing: 'easeOutBounce' },
            plugins: {
              legend: {
                display: false
              },
              tooltip: {
                backgroundColor: "rgba(0,0,0,0.85)",
                titleColor: "#fff",
                bodyColor: "#fff",
                padding: 12,
                callbacks: {
                  label: function(context) {
                    return ` ${context.formattedValue} milli√≥ hallgat√°s`;
                  }
                }
              }
            },
            interaction: { mode: 'nearest', intersect: true },
            onHover: (evt, active) => { evt.native.target.style.cursor = active.length ? 'pointer' : 'default'; },
            scales: {
              x: {
                ticks: { color: "white" },
                grid: { color: "rgba(255,255,255,0.1)" }
              },
              y: {
                ticks: { color: "white", font: { size: 12 } },
                grid: { display: false }
              }
            }
          }
        });
      } catch (error) {
        console.error('Hiba a top el≈ëad√≥k bet√∂lt√©sekor:', error);
      }
    }

    // 5Ô∏è‚É£ M≈±fajok Radar diagram - Dinamikus API bet√∂lt√©s
    async function loadGenreTags() {
      try {
        const response = await fetch(`${LASTFM_BASE_URL}?method=chart.gettoptags&api_key=${LASTFM_API_KEY}&format=json&limit=8`);
        const result = await response.json();
        
        const tags = result.tags.tag;
        const labels = tags.map(t => t.name.charAt(0).toUpperCase() + t.name.slice(1));
        const taggings = tags.map(t => parseInt(t.taggings));

        new Chart(document.getElementById("genreRadarChart"), {
          type: "radar",
          data: {
            labels: labels,
            datasets: [{
              label: "K√∂z√∂ss√©gi c√≠mk√©z√©sek sz√°ma",
              data: taggings,
              backgroundColor: "rgba(0, 188, 212, 0.25)",
              borderColor: "#00bcd4",
              borderWidth: 3,
              pointBackgroundColor: "#00bcd4",
              pointBorderColor: "#fff",
              pointBorderWidth: 2,
              pointRadius: 6,
              pointHoverRadius: 10,
              pointHoverBackgroundColor: "#fff",
              pointHoverBorderColor: "#00bcd4",
              pointHoverBorderWidth: 3
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: { duration: 800, easing: 'easeInOutQuart' },
            plugins: {
              legend: {
                labels: { color: "white", font: { size: 14 } }
              },
              tooltip: {
                backgroundColor: "rgba(0,0,0,0.85)",
                titleColor: "#fff",
                bodyColor: "#fff",
                padding: 10,
                callbacks: {
                  label: function(context) {
                    return ` ${(context.raw / 1000000).toFixed(2)}M c√≠mk√©z√©s`;
                  }
                }
              }
            },
            scales: {
              r: {
                ticks: {
                  color: "white",
                  backdropColor: "rgba(0,0,0,0)",
                  callback: function(value) {
                    return (value / 1000000).toFixed(1) + 'M';
                  }
                },
                grid: { color: "rgba(255,255,255,0.2)" },
                angleLines: { color: "rgba(255,255,255,0.2)" },
                pointLabels: {
                  color: "white",
                  font: { size: 13, weight: 'bold' }
                }
              }
            }
          }
        });
      } catch (error) {
        console.error('Hiba a m≈±fajok bet√∂lt√©sekor:', error);
      }
    }

    // API adatok bet√∂lt√©se
    loadTopArtists();
    loadGenreTags();

    // 6Ô∏è‚É£ iTunes Chart Scraping
    async function loadItunesChart() {
      try {
        // CORS proxy haszn√°lata az iTunes RSS feed el√©r√©s√©hez
        const proxyUrl = 'https://api.allorigins.win/raw?url=';
        const itunesUrl = 'https://itunes.apple.com/us/rss/topsongs/limit=10/json';
        
        const response = await fetch(proxyUrl + encodeURIComponent(itunesUrl));
        const data = await response.json();
        
        const songs = data.feed.entry;
        const labels = songs.map((song, index) => `${index + 1}. ${song['im:name'].label}`);
        const artists = songs.map(song => song['im:artist'].label);
        
        // Poz√≠ci√≥k alapj√°n √©rt√©kek (10-t≈ël 1-ig, hogy a top dal legyen a legnagyobb)
        const values = songs.map((_, index) => 10 - index);

        new Chart(document.getElementById("itunesChart"), {
          type: "polarArea",
          data: {
            labels: labels,
            datasets: [{
              label: "Chart poz√≠ci√≥ (ford√≠tott)",
              data: values,
              backgroundColor: [
                "rgba(255, 99, 132, 0.7)",
                "rgba(54, 162, 235, 0.7)",
                "rgba(255, 206, 86, 0.7)",
                "rgba(75, 192, 192, 0.7)",
                "rgba(153, 102, 255, 0.7)",
                "rgba(255, 159, 64, 0.7)",
                "rgba(199, 199, 199, 0.7)",
                "rgba(83, 102, 255, 0.7)",
                "rgba(255, 99, 255, 0.7)",
                "rgba(99, 255, 132, 0.7)"
              ],
              borderColor: "rgba(255,255,255,0.3)",
              borderWidth: 2,
              hoverBorderColor: "#ffffff",
              hoverBorderWidth: 3
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: { duration: 1000, easing: 'easeInOutQuart' },
            plugins: {
              legend: {
                display: false
              },
              tooltip: {
                backgroundColor: "rgba(0,0,0,0.85)",
                titleColor: "#fff",
                bodyColor: "#fff",
                padding: 12,
                callbacks: {
                  title: function(context) {
                    return songs[context[0].dataIndex]['im:name'].label;
                  },
                  label: function(context) {
                    const index = context.dataIndex;
                    return [
                      `El≈ëad√≥: ${artists[index]}`,
                      `Poz√≠ci√≥: #${index + 1}`
                    ];
                  }
                }
              }
            },
            scales: {
              r: {
                ticks: {
                  display: false,
                  backdropColor: "rgba(0,0,0,0)"
                },
                grid: { color: "rgba(255,255,255,0.1)" },
                angleLines: { color: "rgba(255,255,255,0.2)" },
                pointLabels: {
                  color: "white",
                  font: { size: 11 }
                }
              }
            }
          }
        });
      } catch (error) {
        console.error('Hiba az iTunes chart scraping sor√°n:', error);
        // Fallback adat megjelen√≠t√©s hiba eset√©n
        document.getElementById('itunesChart').parentElement.innerHTML = 
          '<p style="color: #ff6b6b; text-align: center; padding: 2rem;">Az iTunes adatok bet√∂lt√©se sikertelen. Pr√≥b√°ld √∫jra k√©s≈ëbb!</p>';
      }
    }

    loadItunesChart();
  </script>
</body>
</html>
